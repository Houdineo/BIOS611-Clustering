.PHONY: clean all

RDIR = R
FIGDIR = figs
LOGDIR = logs
DERIVED = derived_data

all: $(FIGDIR)/task1_gap.png $(FIGDIR)/task2_gap.png

# Task 1: gap statistic on hypercube clusters
$(FIGDIR)/task1_gap.png logs/task1_gap.log: \
	$(RDIR)/task1_hypercube_gap.R $(RDIR)/functions.R
  mkdir -p $(FIGDIR) logs
  Rscript $(RDIR)/task1_hypercube_gap.R > logs/task1_gap.log 2>&1

# Task 2: spectral clustering on concentric shells
$(FIGDIR)/task2_gap.png logs/task2_gap.log: \
	$(RDIR)/task2_spectral_shells_gap.R $(RDIR)/functions.R
  mkdir -p $(FIGDIR) logs
  Rscript $(RDIR)/task2_spectral_shells_gap.R > logs/task2_gap.log 2>&1

# Clean rule
clean:
	rm -f $(FIGDIR)/*.png
	rm -f logs/*.log
